{{define "table"}}
<div class="log-stats">
    <span>Showing {{.From}}-{{.To}} of {{.Total}} logs</span>
</div>

<table class="log-table">
    <thead>
        <tr>
            <th class="col-time">Timestamp</th>
            <th class="col-level">Level</th>
            <th class="col-message">Message</th>
            <th class="col-caller">Caller</th>
            <th class="col-request-id">Request ID</th>
        </tr>
    </thead>
    <tbody>
        {{range .Entries}}
        <tr class="log-row level-{{.Level}}">
            <td class="col-time">{{.FormattedTime}}</td>
            <td class="col-level"><span class="level-badge level-{{.Level}}">{{.Level}}</span></td>
            <td class="col-message">{{.Message}}</td>
            <td class="col-caller">{{.ShortCaller}}</td>
            <td class="col-request-id">{{if .RequestID}}<code>{{.ShortRequestID}}</code>{{end}}</td>
        </tr>
        <tr class="log-details">
            <td colspan="5">
                <div class="details-content">
                    <div class="detail-row">
                        <span class="detail-label">Full Timestamp:</span>
                        <span class="detail-value">{{.FullTime}}</span>
                    </div>
                    {{if .Caller}}
                    <div class="detail-row">
                        <span class="detail-label">Caller:</span>
                        <span class="detail-value">{{.Caller}}</span>
                    </div>
                    {{end}}
                    {{if .RequestID}}
                    <div class="detail-row">
                        <span class="detail-label">Request ID:</span>
                        <span class="detail-value"><code>{{.RequestID}}</code></span>
                    </div>
                    {{end}}
                    {{if .UserID}}
                    <div class="detail-row">
                        <span class="detail-label">User ID:</span>
                        <span class="detail-value"><code>{{.UserID}}</code></span>
                    </div>
                    {{end}}
                    {{if .Fields}}
                    <div class="detail-row">
                        <span class="detail-label">Fields:</span>
                        <pre class="detail-value fields-json">{{.FieldsJSON}}</pre>
                    </div>
                    {{end}}
                </div>
            </td>
        </tr>
        {{else}}
        <tr>
            <td colspan="5" class="no-logs">No logs found matching the filters.</td>
        </tr>
        {{end}}
    </tbody>
</table>

{{if gt .TotalPages 1}}
<div class="pagination">
    {{if gt .Page 1}}
    <button class="page-btn" data-offset="{{.PrevOffset}}">&laquo; Previous</button>
    {{end}}

    <span class="page-info">Page {{.Page}} of {{.TotalPages}}</span>

    {{if lt .Page .TotalPages}}
    <button class="page-btn" data-offset="{{.NextOffset}}">Next &raquo;</button>
    {{end}}
</div>
{{end}}
{{end}}
